{"name":"perceptual-kernels","tagline":"Data and source code for the first phase of the perceptual kernels study. ","body":"Learning Perceptual Kernels for</br> Visualization Design\r\n===================================================\r\n\r\nThis repo contains the results and source code from our crowdsourced experiments to estimate\r\nperceptual kernels for color, shape, size and combinations thereof. What is a perceptual kernel? \r\nIt is a distance matrix derived from aggregate perceptual judgments. In its basic form, a perceptual kernel \r\ncontains pairwise perceptual dissimilarity values for a specific set of perceptual stimuli---we refer \r\nto this set as a palette. In our study, we estimate perceptual kernels for the following six palettes. \r\n\r\n<img width=\"600\" align=\"middle\" src=https://rawgit.com/uwdata/perceptual-kernels/master/doc/imgs/allpalettes.svg>\r\n\r\nThere can be several alternative ways for experimentally constructing perceptual kernels. \r\nFor example, we construct perceptual kernels from subjective similarity judgments. \r\nPsychology literature offers several task types for these judgments. \r\nHow to choose one? What is the most effective judgment task in the context of perceptual \r\nkernels? So, understanding the trade-offs between different designs of judgment tasks is important. \r\nWe estimate five perceptual kernels for each of the palettes above using the five different \r\njudgment tasks below---links show the task interfaces of the shape palette (refresh your page if you see a garbled image). \r\n+ [Pairwise rating on 5-Point Scale (L5)](https://rawgit.com/uwdata/perceptual-kernels/master/exp/shape/l5/shape-l5.html)\r\n+ [Pairwise rating on 9-Point scale (L9)](https://rawgit.com/uwdata/perceptual-kernels/master/exp/shape/l9/shape-l9.html)\r\n+ [Triplet ranking with matching (Tm)](https://rawgit.com/uwdata/perceptual-kernels/master/exp/shape/tm/shape-tm.html)\r\n+ [Triplet ranking with discrimination (Td)](https://rawgit.com/uwdata/perceptual-kernels/master/exp/shape/td/shape-td.html)\r\n+ [Spatial arrangement (SA)](https://rawgit.com/uwdata/perceptual-kernels/master/exp/shape/sa/shape-sa.html)\r\n\r\n\r\nHow to use the data and source code in this repo? \r\n------------------------------------------------\r\nThere are several ways to use the data and source code provided here. \r\nTo start, get a local copy of the directory structure, either using git \r\ncommands  or by downloading and uncompressing the [zipped repo](https://github.com/uwdata/perceptual-kernels/archive/master.zip).  \r\n\r\n<h3> Accessing the data </h3> \r\nYou can  directly access the final perceptual kernels and use them for your own purposes, \r\nresearch or otherwise. You will see thirty kernels in [data/kernels/](https://github.com/uwdata/perceptual-kernels/tree/master/data/kernels) folder. These are symmetric, normalized matrices stored as comma-seperated text files. File names denote the variable and judgment task types used. For example, [color-sa.txt](https://github.com/uwdata/perceptual-kernels/tree/master/data/kernels/color-sa.txt) is a perceptual kernel for the color palette that was elicited using spatial arrangement (SA). The kernels under [data/kernels](data/kernels) are all filtered and  aggregated as discussed in our [draft](doc/perceptual-kernels.pdf?raw=true).  \r\n\r\nYou can also access the raw datasets in [data/raw](data/raw), which include unprocessed per-subject measurements. \r\nYou can use the raw data, e.g., to perform your own custom data processing and agregation or, more interestingly, \r\nper-subject data analysis. \r\n\r\n<h3>Viewing the data</h3>\r\nFirst, you will need to install  [node.js](http://nodejs.org) and the node modules for express.js and d3.js (pretty easy with [npm](https://www.npmjs.org/), a package manager for node.js; for example, `npm install d3` will install \r\nthe d3 module for you). The kernels in [data/kernels](data/kernels) can be then viewed as interactive grayscale heatmaps and two-dimensional scatter plots by running [view/showkernel.js](view/showkernel.js) from the command line. For example, \r\n```shell\r\n./showkernel.js  color-tm\r\n```\r\nwill draw the corresponding color kernel as a grayscale heatmap in your default browser along with a two-dimensional projection of the kernel, where in-plane distances between the colors approximate the perceptual distances of the kernel.  We obtain the projection points with [multidimensional scaling](http://en.wikipedia.org/wiki/Multidimensional_scaling) on the perceptual kernel. \r\n\r\n<img width=\"512\" src=https://rawgit.com/uwdata/perceptual-kernels/master/doc/imgs/viewexample.png?raw=true>\r\n\r\n<img width=\"512\" style=\"float:left\" src=https://rawgit.com/uwdata/perceptual-kernels/master/doc/imgs/viewexample2.png?raw=true>\r\n\r\nHovering over a cell of the heatmap will show the corresponding perceptual kernel distance in a tooltip. Similarly, hovering over a projection point will isolate the corresponding row and column in the heatmap. The two bars under the projection scatter plot  show the overall and per-row (or column) rank correlations between the perceptual kernel and the distance matrix directly derived from the planar projection. They are there to give you an idea about the accuracy of the projection with respect to the kernel distances as two-dimensional projections are lossy representations in general. \r\n\r\n\r\n<h3>Reproducing the experiments</h3> \r\nIn addition to accessing the data, you can reproduce and extend our experiments using the source code \r\nprovided. Each experiment is designed to be as self-contained as possible. For example, if you would like to see the experiment setup produced [color-sa.txt](exp/color/sa/color-sa.txt), you can go to [exp/color/sa/](https://github.com/uwdata/perceptual-kernels/tree/master/exp/color/sa) directory. You can check \r\nout the task interface  by opening  [color-sa.html](https://github.com/uwdata/perceptual-kernels/tree/master/exp/color/sa/color-sa.html) in your browser. We recommend you go through and complete the task to understand what it entails. If you want to reproduce this experiment (or other experiments in [exp/](exp/), for that matter), you need to \r\nfirst install  [Amazon Mechanical Turk Command Line Tools](https://aws.amazon.com/developertools/Amazon-Mechanical-Turk/694) and then set two environment variables: MTURKCLT_HOME, which should point the installation directory for Amazon's command line tools,  and STUDY_HOME , which should point your local perceptual-kernels directory. Now, take a look at [color-sa.properties](exp/color/sa/color-sa.properties), which contains the properties of the experiment, from its summary description to the number and qualifications of subjects (Turkers)  requested. Since the goal is to repeat the experiment, you don't need to edit this file but make sure you understand its contents. You will need, \r\nhowever, to edit the files  [color-sa.html](exp/color/sa/color-sa.html) and [color-sa.question](exp/color/sa/color-sa.question). \r\n\r\nIn order to run the experiment in a test mode on Amazon's Mechanical Turk sandbox, uncomment the following line in [color-sa.html](exp/color/sa/color-sa.html)\r\n```html\r\n<form id=\"form\" autocomplete=\"off\" method=\"POST\" action=\"https://workersandbox.mturk.com/mturk/externalSubmit\">\r\n```\r\nand make sure the next line \r\n```html\r\n<form id=\"form\" autocomplete=\"off\" method=\"POST\" action=\"https://www.mturk.com/mturk/externalSubmit\">\r\n```\r\nis commented out. Of course, you shouldn't do this if you want to use the production site. \r\n\r\n[color-sa.html](exp/color/sa/color-sa.html) implements the task as a dynamic single page web application. \r\nNext step is to make it publicly available so that Turkers can access it embedded in an iframe \r\non Amazon's site. Copy [color-sa.html](exp/color/sa/color-sa.html) (with its dependencies) \r\nsomewhere on your web server and provide its url address within `<ExternalURL></ExternalURL>` tags in [color-sa.question](exp/color/sa/color-sa.question). If you are  using an http server (as opposed to https), \r\nremember to remove the http keyword from the url address---see [color-sa.question](/exp/color/sa/color-sa.question) for an example. Make sure that the .js and .css files that [color-sa.html](exp/color/sa/color-sa.html) uses are also publicly accessible, either on your web server or somewhere else on the web. Assuming you have set up your Amazon Mechanical Turk account properly, you are now ready to upload the task by running the script [`runSandbox.sh`](exp/color/sa/runSandbox.sh). This will try to  upload the task on Amazon Mechanical Turk's sandbox  site and, if successful, will create a file called `color-sa.success`.  Note that [`runSandbox.sh`](exp/color/sa/runSandbox.sh) calls [`$MTURKCLT_HOME/bin/loadHITs.sh`](http://docs.aws.amazon.com/AWSMechTurk/latest/AWSMturkCLT/CLTReference_LoadHITsCommand.html) with `-sandbox` argument. If you're ready to use the production site, you should run  [`runProduction.sh`](exp/color/sa/runProduction.sh), while making sure `service_url` in `$MTURKCLT_HOME/bin/mturk.properties` is set to the Amazon Mechanical Turk's production site.\r\n\r\n\r\n\r\nWhat is a perceptual kernel?\r\n----------------------------\r\nPerceptual kernels are distance matrices derived from aggregate perceptual similarity judgments. \r\nHere is an example of a perceptual kernel:\r\n\r\n![](https://rawgit.com/uwdata/perceptual-kernels/master/doc/imgs/tmshape.png?raw=true)\r\n<p>(Left) A crowd-estimated perceptual kernel for a shape palette. Darker entries indicate \r\nperceptually closer (similar) shapes. (Right) A two-dimensional projection of the palette \r\nshapes obtained via [multidimensional scaling](http://en.wikipedia.org/wiki/Multidimensional_scaling) of the perceptual kernel. \r\n\r\nWhat is it useful for? \r\n----------------------\r\nVisualization design benefits from careful consideration of perception,\r\nas different assignments of visual encoding variables such as color, shape and size\r\naffect how viewers interpret data. Perceptual kernels represent perceptual differences between and\r\nwithin visual variables in a reusable form that is directly applicable to\r\nvisualization evaluation and automated design. In other words, perceptual kernels \r\nprovide a useful operational model for incorporating empirical perception data directly \r\ninto visualization design tools.  Please refer to our [draft on perceptual kernels](https://rawgit.com/uwdata/perceptual-kernels/master/doc/perceptual-kernels.pdf) \r\nfor further details. \r\n\r\nHere are few examples of how the kernels can be used. \r\n\r\n<h3> Automatically designing new palettes</h3> \r\n\r\nGiven an estimated perceptual kernel, we can use it to revisit existing palettes. \r\nFor example, we can choose a set of stimuli that maximizes perceptual distance or \r\nconversely minimizes perceptual similarity according to the kernel.\r\nThe following shows the n most discriminable subsets of the shape, size, and color variables. \r\n(We include size for completeness,  though in practice this palette is better suited to quantitative, \r\nrather than categorical, data.)  To compute a subset with n elements, we first initialize the set with \r\nthe variable pair that  has the highest perceptual distance. We then add new elements to this set, by finding the variable \r\nwhose minimum distance to the existing subset is the maximum (i.e., the  [Hausdorff distance](http://en.wikipedia.org/wiki/Hausdorff_distance) between two point sets).\r\n\r\n<img width=\"600\"src=https://rawgit.com/uwdata/perceptual-kernels/master/doc/imgs/tmnewpalette.svg?raw=true>\r\n\r\nYou may also want to check out [this illustration](http://uwdata.github.io/perceptual-kernels/#reorder-demo)\r\n---note that we cannot run js code from this page directly.  \r\n\r\n<h3> Visual embedding </h3> \r\n\r\nPerceptual kernels can also guide [visual embedding](http://vis.stanford.edu/papers/visual-embedding) to choose encodings that preserve data-space distance metrics in terms of kernel-defined perceptual distances. To perform discrete embeddings, we find the optimal distance-preserving assignment of palette items to data points. \r\nThe following scatter plot  compares color distance measures. \r\n\r\n<img width=\"400\" src=https://rawgit.com/uwdata/perceptual-kernels/master/doc/imgs/modelprojs.svg?raw=true>\r\n\r\nThe plotting symbols were chosen automatically using visual embedding. We use the correlation matrix of the \r\ncolor models below  as the distances in the data domain, and the triplet matching (Tm) kernel for the shape palette as the distances in the perceptual range. \r\n\r\n\r\n|             | Kernel (Tm) | CIELAB | CIEDE2000 | Color Name |\r\n|-------------|:-------------:|:--------:|:-----------:|:------------:|\r\n| **Kernel (Tm)** | 1.00        | 0.67   | 0.59      | 0.75       |\r\n| **CIELAB**      | 0.67        | 1.00   | 0.87      | 0.81       |\r\n| **CIEDE2000**   | 0.59        | 0.87   | 1.00      | 0.77       |\r\n| **Color Name**  | 0.75        | 0.81   | 0.77      | 1.00       |\r\n<h4>Rank correlations between a crowd-estimated perceptual-kernel of the <br>\r\ncolor palette and the kernels derived from the existing color distance models for <br>\r\nthe same palette. Higher values indicate more similar kernels.</h4>\r\n\r\nThis automatic assignment reflects the correlations between the variables. The correlation between [CIELAB](http://en.wikipedia.org/wiki/Lab_color_space) and [CIEDE2000](http://en.wikipedia.org/wiki/Color_difference#CIEDE2000) is higher than the correlation between the triplet matching kernel and color names, and the assigned shapes reflect this relationship perceptually. For example, the perceptual distance between upward- and downward-pointing triangles is smaller than the perceptual distance between circle and square.\r\n\r\nIn a second example, we use visual embedding to encode community clusters in a character co-occurrence graph derived from [Victor Hugo](http://en.wikipedia.org/wiki/Victor_Hugo)â€™s novel [Les Miserables](http://en.wikipedia.org/wiki/Les_Miserables). Cluster memberships were computed using a standard modularity-based community-detection algorithm. For the data space distances, we count all inter-cluster edges and then normalize by the theoretically maximal number of edges between groups. To provide more dynamic range, we re-scale these normalized values to the range [0.2,0.8]. Clusters that share no connecting edges are given a maximal distance of 1. We then perform separate visual embeddings using univariate color and shape kernels (both estimated using triplet matching). As shown in the following figure, the assigned colors and shapes perceptually reflect the inter-cluster relations.\r\n\r\n<img width=\"400\" src=https://rawgit.com/uwdata/perceptual-kernels/master/doc/imgs/lm.svg?raw=true>\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}